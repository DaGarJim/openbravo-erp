<?xml version="1.0"?>
  <database name="VIEW M_INOUT_LINE_VT">
    <view name="M_INOUT_LINE_VT" updatable="false">SELECT iol.AD_Client_ID, iol.AD_Org_ID, iol.IsActive, iol.Created, iol.CreatedBy, iol.Updated, iol.UpdatedBy,
  uom.AD_Language,
  iol.M_InOut_ID, iol.M_InOutLine_ID,
  iol.Line,
  iol.MovementQty, uom.UOMSymbol,
  COALESCE(COALESCE(pt.Name,p.Name), iol.Description) AS Name, -- main line
  CASE WHEN COALESCE(pt.Name,p.Name) IS NOT NULL THEN iol.Description END AS Description, -- second line
  COALESCE(pt.DocumentNote, p.DocumentNote) AS DocumentNote, -- third line
    p.UPC, p.SKU, p.Value AS ProductValue,
  iol.M_Locator_ID, iol.Lot, iol.SerNo
FROM  M_InOutLine iol
  INNER JOIN C_UOM_Trl uom ON (iol.C_UOM_ID=uom.C_UOM_ID)
  LEFT OUTER JOIN M_Product p ON (iol.M_PRODUCT_ID=p.M_PRODUCT_ID)
  LEFT OUTER JOIN M_Product_Trl pt ON (iol.M_PRODUCT_ID=pt.M_PRODUCT_ID AND uom.AD_Language=pt.AD_Language)
UNION
SELECT iol.AD_Client_ID, iol.AD_Org_ID, iol.IsActive, iol.Created, iol.CreatedBy, iol.Updated, iol.UpdatedBy,
  uom.AD_Language,
  iol.M_InOut_ID, iol.M_InOutLine_ID,
  iol.Line+(b.Line/100) AS Line,
  iol.MovementQty*b.BOMQty AS QtyInvoiced,
  uom.UOMSymbol,
  COALESCE (pt.Name, p.Name) AS Name, -- main line
  b.Description, -- second line
  COALESCE (pt.DocumentNote, p.DocumentNote) AS DocumentNote, -- third line
    p.UPC, p.SKU, p.Value AS ProductValue,
  iol.M_Locator_ID, iol.Lot, iol.SerNo
FROM M_Product_BOM b  -- BOM lines
  INNER JOIN M_InOutLine iol ON (b.M_Product_ID=iol.M_Product_ID)
  INNER JOIN M_Product bp ON (bp.M_Product_ID=iol.M_Product_ID -- BOM Product
    AND bp.IsBOM='Y' AND bp.IsVerified='Y' AND bp.IsPickListPrintDetails='Y')
  INNER JOIN M_Product p ON (b.M_ProductBOM_ID=p.M_Product_ID) -- BOM line product
  INNER JOIN C_UOM_Trl uom ON (p.C_UOM_ID=uom.C_UOM_ID)
  INNER JOIN M_Product_Trl pt ON (iol.M_PRODUCT_ID=pt.M_PRODUCT_ID AND uom.AD_Language=pt.AD_Language)</view>
  </database>
