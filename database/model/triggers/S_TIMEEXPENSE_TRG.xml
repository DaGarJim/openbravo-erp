<?xml version="1.0"?>
  <database name="TRIGGER S_TIMEEXPENSE_TRG">
    <trigger name="S_TIMEEXPENSE_TRG" table="S_TIMEEXPENSE" fires="before" insert="true" update="true" delete="true" foreach="row">
      <body>



  v_ID    NUMBER;
  v_RO    NUMBER;
/******************************************************************************
 * The contents of this file are subject to the   Compiere License  Version 1.1
 * ("License"); You may not use this file except in compliance with the License
 * You may obtain a copy of the License at http://www.compiere.org/license.html
 * Software distributed under the License is distributed on an  "AS IS"  basis,
 * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License for
 * the specific language governing rights and limitations under the License.
 * The Original Code is                  Compiere  ERP &amp;  Business Solution
 * The Initial Developer of the Original Code is Jorg Janke  and ComPiere, Inc.
 * Portions created by Jorg Janke are Copyright (C) 1999-2001 Jorg Janke, parts
 * created by ComPiere are Copyright (C) ComPiere, Inc.;   All Rights Reserved.
 * Contributor(s): Openbravo SL
 * Contributions are Copyright (C) 2001-2006 Openbravo S.L.
 ******************************************************************************/
BEGIN

 IF (INSERTING) THEN
  IF (:NEW.PROCESSED = 'Y') THEN
  RAISE_APPLICATION_ERROR(-20501, 'Document processed/posted');
 END IF;
 ELSE
   IF (UPDATING AND :OLD.PROCESSED = 'Y') THEN
  IF (:NEW.DocumentNo&lt;&gt;:OLD.DocumentNo
          OR :NEW.C_BPartner_ID&lt;&gt;:OLD.C_BPartner_ID
          OR :NEW.DATEREPORT&lt;&gt;:OLD.DATEREPORT)
          OR :NEW.AD_ORG_ID&lt;&gt;:OLD.AD_ORG_ID THEN
       RAISE_APPLICATION_ERROR(-20501, 'Document processed/posted');
     END IF;
  END IF;
 END IF;

END S_TIMEEXPENSE_TRG 

</body>
    </trigger>
  </database>
