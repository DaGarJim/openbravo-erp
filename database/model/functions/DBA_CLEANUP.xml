<?xml version="1.0"?>
  <database name="FUNCTION DBA_CLEANUP">
    <function name="DBA_CLEANUP" type="NULL">
      <body><![CDATA[
  /*************************************************************************
  * The contents of this file are subject to the Compiere License
  * Version 2.5.0 ("License"); You may not use this file except in
  * compliance with the License. You may obtain a copy of the License at
  * http://www.compiere.org/license.html
  * Software distributed under the License is distributed on an
  * "AS IS" basis, WITHOUT WARRANTY OF ANY KIND, either express or
  * implied. See the License for the specific language governing rights
  * and limitations under the License.
  * The Original Code is  Compiere  ERP &  Business Solution
  * The Initial Developer of the Original Code is Jorg Janke  and ComPiere,
  Inc.
  * Portions created by Jorg Janke are Copyright (C) 1999-2001 Jorg Janke,
  * parts created by ComPiere are Copyright (C) ComPiere, Inc.;
  * All Rights Reserved.
  * Contributor(s): Openbravo SL
  * Contributions are Copyright (C) 1999-2005 Openbravo, S.L
  *************************************************************************
  * $Id: DBA_Cleanup.sql,v 1.7 2003/02/16 01:47:30 jjanke Exp $
  ***
  * Title: Cleanup old temporary data
  * Description:
  ************************************************************************/
  v_rowcount NUMBER;
BEGIN
  DBMS_OUTPUT.PUT_LINE('DBA_Cleanup') ;
  --  Temporary Tables
  DELETE FROM T_Spool;
  v_rowcount:=SQL%ROWCOUNT;
  DBMS_OUTPUT.PUT_LINE(' T_Spool=' || v_rowcount) ;
  DELETE FROM T_InventoryValue;
  v_rowcount:=SQL%ROWCOUNT;
  DBMS_OUTPUT.PUT_LINE(' T_InventoryValue=' || v_rowcount) ;
  DELETE FROM T_Replenish;
  v_rowcount:=SQL%ROWCOUNT;
  DBMS_OUTPUT.PUT_LINE(' T_Replenish=' || v_rowcount) ;
  DELETE FROM T_Report;
  v_rowcount:=SQL%ROWCOUNT;
  DBMS_OUTPUT.PUT_LINE(' T_Report=' || v_rowcount) ;
  DELETE FROM T_ReportStatement;
  v_rowcount:=SQL%ROWCOUNT;
  DBMS_OUTPUT.PUT_LINE(' T_ReportStatement=' || v_rowcount) ;
  -- Processes older than a day
  DELETE FROM AD_PInstance WHERE Created<now() -1;
  v_rowcount:=SQL%ROWCOUNT;
  DBMS_OUTPUT.PUT_LINE(' Old AD_PInstance=' || v_rowcount) ;
  -- Search Info
  DELETE FROM AD_Find;
  v_rowcount:=SQL%ROWCOUNT;
  DBMS_OUTPUT.PUT_LINE(' AD_Find=' || v_rowcount) ;
  -- Errors older than 1 week
  DELETE FROM AD_Error WHERE Created<now() -7;
  v_rowcount:=SQL%ROWCOUNT;
  DBMS_OUTPUT.PUT_LINE(' Old AD_Error=' || v_rowcount) ;
  --  Trace
  DELETE FROM AD_Trace;
  v_rowcount:=SQL%ROWCOUNT;
  DBMS_OUTPUT.PUT_LINE(' AD_Trace=' || v_rowcount) ;
  --  Acknowledged Notes older than a day
  DELETE FROM AD_Note WHERE Processed='Y' AND Updated<now() -1;
  v_rowcount:=SQL%ROWCOUNT;
  DBMS_OUTPUT.PUT_LINE(' Processed AD_Note=' || v_rowcount) ;
  --
  -- Commented by cromero 19102006 COMMIT;
END DBA_Cleanup
]]></body>
    </function>
  </database>
