<?xml version="1.0"?>
  <database name="FUNCTION FRIE_NAME">
    <function name="FRIE_NAME" type="VARCHAR">
      <parameter name="p_name" type="VARCHAR" mode="in">
        <default/>
      </parameter>
      <body><![CDATA[/*************************************************************************
* The contents of this file are subject to the Compiere Public
* License 1.1 ("License"); You may not use this file except in
* compliance with the License. You may obtain a copy of the License in
* the legal folder of your Openbravo installation.
* Software distributed under the License is distributed on an
* "AS IS" basis, WITHOUT WARRANTY OF ANY KIND, either express or
* implied. See the License for the specific language governing rights
* and limitations under the License.
* The Original Code is  Compiere  ERP &  Business Solution
* The Initial Developer of the Original Code is Jorg Janke and ComPiere, Inc.
* Portions created by Jorg Janke are Copyright (C) 1999-2001 Jorg Janke,
* parts created by ComPiere are Copyright (C) ComPiere, Inc.;
* All Rights Reserved.
* Contributor(s): Openbravo SL
* Contributions are Copyright (C) 2001-2008 Openbravo, S.L.
*
* Specifically, this derivative work is based upon the following Compiere
* file and version.
*************************************************************************
* $Id: FRIE_Name.sql,v 1.3 2002/10/21 04:49:45 jjanke Exp $
***
* Title: Return "clean" Product Name
* Description:
************************************************************************/
  v_RetValue VARCHAR2(60) ;
BEGIN
  -- Clean double spaces
  v_RetValue := REPLACE(p_Name, '  ', ' ') ;
  v_RetValue := REPLACE(v_RetValue, '  ', ' ') ;
  v_RetValue := REPLACE(v_RetValue, '  ', ' ') ;
  -- Isolate R
  v_RetValue := REPLACE(v_RetValue, '0R1', '0 R 1') ;
  v_RetValue := REPLACE(v_RetValue, '0R 1', '0 R 1') ;
  v_RetValue := REPLACE(v_RetValue, '0 R1', '0 R 1') ;
  v_RetValue := REPLACE(v_RetValue, '5R1', '5 R 1') ;
  v_RetValue := REPLACE(v_RetValue, '5R 1', '5 R 1') ;
  v_RetValue := REPLACE(v_RetValue, '5 R1', '5 R 1') ;
  v_RetValue := REPLACE(v_RetValue, '0R2', '0 R 2') ;
  v_RetValue := REPLACE(v_RetValue, '0R 2', '0 R 2') ;
  v_RetValue := REPLACE(v_RetValue, '0 R2', '0 R 2') ;
  v_RetValue := REPLACE(v_RetValue, '5R2', '5 R 2') ;
  v_RetValue := REPLACE(v_RetValue, '5R 2', '5 R 2') ;
  v_RetValue := REPLACE(v_RetValue, '5 R2', '5 R 2') ;
  v_RetValue := REPLACE(v_RetValue, '2R2', '2 R 2') ;
  v_RetValue := REPLACE(v_RetValue, '2R 2', '2 R 2') ;
  v_RetValue := REPLACE(v_RetValue, '2 R2', '2 R 2') ;
  v_RetValue := REPLACE(v_RetValue, '0R8', '0 R 8') ;
  -- Isolate HR
  v_RetValue := REPLACE(v_RetValue, '0HR1', '0 HR 1') ;
  -- Isolate VR
  v_RetValue := REPLACE(v_RetValue, '0VR1', '0 VR 1') ;
  v_RetValue := REPLACE(v_RetValue, '5VR1', '5 VR 1') ;
  v_RetValue := REPLACE(v_RetValue, '0VR3', '0 VR 3') ;
  v_RetValue := REPLACE(v_RetValue, '5VR3', '5 VR 3') ;
  v_RetValue := REPLACE(v_RetValue, '0VR 1', '0 VR 1') ;
  v_RetValue := REPLACE(v_RetValue, '5VR 1', '5 VR 1') ;
  -- Isolate ZR
  v_RetValue := REPLACE(v_RetValue, '0ZR1', '0 ZR 1') ;
  v_RetValue := REPLACE(v_RetValue, '5ZR1', '5 ZR 1') ;
  v_RetValue := REPLACE(v_RetValue, '0ZR 1', '0 ZR 1') ;
  v_RetValue := REPLACE(v_RetValue, '5ZR 1', '5 ZR 1') ;
  v_RetValue := REPLACE(v_RetValue, '0 ZR1', '0 ZR 1') ;
  v_RetValue := REPLACE(v_RetValue, '5 ZR1', '5 ZR 1') ;
  -- Change "B." => B
  IF(SUBSTR(v_RetValue, 1, 2) = 'B.') THEN
    v_RetValue := REPLACE(v_RetValue, 'B.', 'B') ;
  END IF;
  -- Remove "D."
  IF(SUBSTR(v_RetValue, 1, 2) = 'D.') THEN
    v_RetValue := SUBSTR(v_RetValue, 3) ;
  END IF;
  -- Remove "D "
  IF(SUBSTR(v_RetValue, 1, 2) = 'D ') THEN
    v_RetValue := SUBSTR(v_RetValue, 3) ;
  END IF;
  --
  RETURN TRIM(v_RetValue) ;
END FRIE_NAME
]]></body>
    </function>
  </database>
